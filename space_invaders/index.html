<!DOCTYPE html>
<html lang= "en">
    <head>
        <title>
           Galaga
        </title>
        <link rel = "stylesheet" href = "style.css">

    </head>
    <body>
        <div id= "background">
            <div id= "player"></div> 
            <div id = "enemies"></div>
            <div id = "missiles"></div>
            
        </div>
    <script>    
    var player = {
        top:550, left: 300
        
    };
    var missiles = [];
    var enemies = [
            { left: 100, top: 100 },
            { left: 150, top: 100 },
            { left: 200, top: 100 },
            { left: 250, top: 100 },
            { left: 300, top: 100 },
            { left: 350, top: 100 },
            { left: 400, top: 100 },
            { left: 450, top: 100 },
            { left: 100, top: 175 },
            { left: 150, top: 175 },
            { left: 200, top: 175 },
            { left: 250, top: 175 },
            { left: 300, top: 175 },
            { left: 350, top: 175 },
            { left: 400, top: 175 },
            { left: 450, top: 175 }
        ];
        
    
        document.onkeydown = function(e){
            console.log(e.keyCode);
            if(e.keyCode==37){
                console.log("Left")
                if(player.left>=20){
                    player.left= player.left-10
                    movePlayer()
                }
           }
            if( e.keyCode==38){
            console.log("up")
                if(player.top>0){
                player.top= player.top-10
                movePlayer() 
                }
           }    
            if(e.keyCode==40){
           console.log("down")
                if(player.top<700){
                    player.top= player.top+10
                     movePlayer()  
                }
           }

           
            if(e.keyCode==39){
               console.log("right")
               if(player.left<550){
               player.left= player.left+10
               movePlayer()
               }
           }
            if(e.keyCode=32){
               console.log("fire")
               missiles.push({
                   left:player.left+ 15,
                   top:player.top -20
                   
               });
               drawMissiles()
               console.log(missiles);
              
           }
       
        }
        function movePlayer(){
            document.getElementById('player').style.left= player.left + "px";
            document.getElementById('player').style.top= player.top + "px";

        }
        function drawMissiles() {
            document.getElementById('missiles').innerHTML = ""
            for(var i = 0 ; i < missiles.length ; i++ ) {
                document.getElementById('missiles').innerHTML += `<div class='missile' style='left:${missiles[i].left}px; top:${missiles[i].top}px'></div>`;
            }
        }
        function moveMissiles() {
            for(var i = 0 ; i < missiles.length ; i++ ) {
                missiles[i].top = missiles[i].top - 5
            }
        }
        function drawEnemies() {
            document.getElementById('enemies').innerHTML = ""
            for(var i = 0 ; i < enemies.length ; i++ ) {
                document.getElementById('enemies').innerHTML += `<div class='enemy' style='left:${enemies[i].left}px; top:${enemies[i].top}px'></div>`;
            }
        }
        function moveEnemies() {
            for(var i = 0 ; i < enemies.length ; i++ ) {
                enemies[i].top = enemies[i].top + 1;
                if (enemies[i].top == 550){
                    enemies[i].top = 0
                }
            }
        }
        function collisionDetection() {
            for (var enemy = 0; enemy < enemies.length; enemy++) {
                for (var missile = 0; missile < missiles.length; missile++) {
                    if ( 
                        missiles[missile].left >= enemies[enemy].left  &&
                        missiles[missile].left <= (enemies[enemy].left + 50)  &&
                        missiles[missile].top <= (enemies[enemy].top + 50)  &&
                        missiles[missile].top >= enemies[enemy].top
                    ) {
                        enemies.splice(enemy, 1);
                        missiles.splice(missile, 1);
                    }
                }
            }
        }

      
        function Whatcomesfirst(){
            setTimeout(Whatcomesfirst, 10)
            moveMissiles();
            drawMissiles();
            moveEnemies();
            drawEnemies();
            collisionDetection();
         
        }
        
        Whatcomesfirst();
       
    </script>
    </body>
    </html>